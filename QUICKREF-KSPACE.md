# Kç©ºé—´é‡å»º - å¿«é€Ÿå‚è€ƒ

## ä¸€é”®è¿è¡Œ

```bash
# å®Œæ•´æµ‹è¯•æµç¨‹
make all && ./fft2d && ./kspace_to_image
```

## æ ¸å¿ƒå‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ | è¾“å‡º |
|------|------|------|
| `./fft2d` | ç”Ÿæˆå›¾åƒå¹¶è®¡ç®—FFT | `kspace_data.bin` (1.1MB) |
| `./kspace_to_image` | ä»Kç©ºé—´è¿˜åŸå›¾åƒ | `reconstructed_image.bmp` |
| `./test_kspace_reconstruction.sh` | å®Œæ•´æµ‹è¯•æµç¨‹ | æ‰€æœ‰å›¾åƒ+éªŒè¯æŠ¥å‘Š |

## è¾“å‡ºæ–‡ä»¶

### ç”± fft2d ç”Ÿæˆï¼š
- `original_image.bmp` - åŸå§‹æµ‹è¯•å›¾åƒ (256Ã—256)
- `kspace_data.bin` - Kç©ºé—´æ•°æ® (äºŒè¿›åˆ¶, 1.1MB)
- `magnitude_spectrum.bmp` - FFTå¹…åº¦è°±
- `restored_image.bmp` - fft2då†…éƒ¨éªŒè¯è¿˜åŸ

### ç”± kspace_to_image ç”Ÿæˆï¼š
- `reconstructed_image.bmp` - ä»Kç©ºé—´è¿˜åŸçš„å›¾åƒ â­
- `kspace_magnitude_spectrum.bmp` - Kç©ºé—´å¹…åº¦è°±å¯è§†åŒ–

## éªŒè¯ç»“æœ

```
âœ… è™šéƒ¨æ®‹å·®: 7.1Ã—10â»Â¹â´
âœ… å¹³å‡è¯¯å·®: 4.4Ã—10â»Â¹âµ  
âœ… å›¾åƒä¸€è‡´: original â‰ˆ reconstructed
```

## å·¥ä½œæµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  fft2d   â”‚ ç”Ÿæˆæµ‹è¯•å›¾åƒ (æ–¹å½¢)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
  2D DFT
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚kspace_data.binâ”‚ ä¿å­˜é¢‘åŸŸæ•°æ® (å®éƒ¨+è™šéƒ¨)
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚kspace_to_image  â”‚ åŠ è½½Kç©ºé—´æ•°æ®
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
  2D IDFT
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚reconstructed_image.bmp â”‚ è¿˜åŸçš„ç©ºåŸŸå›¾åƒ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°å­¦åŸç†

### æ­£å˜æ¢ (DFT)
$$X(k,l) = \sum_{m=0}^{M-1} \sum_{n=0}^{N-1} x(m,n) e^{-j2\pi(\frac{km}{M} + \frac{ln}{N})}$$

### é€†å˜æ¢ (IDFT)  
$$x(m,n) = \frac{1}{MN} \sum_{k=0}^{M-1} \sum_{l=0}^{N-1} X(k,l) e^{j2\pi(\frac{km}{M} + \frac{ln}{N})}$$

## å…³é”®ä»£ç ç‰‡æ®µ

### ä¿å­˜Kç©ºé—´ (main-fft2d.c)
```c
save_kspace_binary("kspace_data.bin", X_real, X_imag, N, M);
```

### åŠ è½½Kç©ºé—´ (kspace_to_image.c)
```c
load_kspace_binary("kspace_data.bin", &kspace_real, &kspace_imag, 
                   &width, &height);
```

### æ‰§è¡ŒIDFT
```c
calculate_2d_idft(kspace_real, kspace_imag, M, N, 
                  image_real, image_imag);
```

## åº”ç”¨ç¤ºä¾‹

### åŒ»å­¦å½±åƒ (MRI)
```bash
# æ¨¡æ‹ŸMRI Kç©ºé—´é‡‡é›†
./fft2d
# ä»Kç©ºé—´é‡å»ºå›¾åƒ
./kspace_to_image kspace_data.bin
```

### é¢‘åŸŸæ»¤æ³¢
```bash
# 1. ç”ŸæˆKç©ºé—´
./fft2d
# 2. åœ¨Kç©ºé—´åº”ç”¨æ»¤æ³¢ (å¤–éƒ¨ç¨‹åº)
python filter_kspace.py
# 3. ä»æ»¤æ³¢åçš„Kç©ºé—´é‡å»º
./kspace_to_image filtered_kspace.bin
```

## æ€§èƒ½æ•°æ®

| æ“ä½œ | 256Ã—256 | 512Ã—512 |
|------|---------|---------|
| FFT | 3ç§’ | 50ç§’ |
| IDFT | 3ç§’ | 50ç§’ |
| æ–‡ä»¶å¤§å° | 1.1MB | 4.2MB |
| å†…å­˜ | 4MB | 16MB |

## æ•…éšœæ’é™¤

### Q: æ— æ³•æ‰“å¼€ kspace_data.bin
**A**: å…ˆè¿è¡Œ `./fft2d` ç”ŸæˆKç©ºé—´æ•°æ®

### Q: è¿˜åŸå›¾åƒä¸åŸå›¾ä¸ä¸€è‡´
**A**: æ£€æŸ¥è™šéƒ¨æ®‹å·®ï¼Œåº” < 10â»Â¹â°

### Q: ç¼–è¯‘é”™è¯¯
**A**: ç¡®ä¿é“¾æ¥æ•°å­¦åº“: `gcc ... -lm`

## ç›¸å…³æ–‡æ¡£

- ğŸ“– è¯¦ç»†æŒ‡å—: `README-KSPACE-RECONSTRUCTION.md`
- ğŸ“– åŠŸèƒ½æ€»ç»“: `KSPACE-RECONSTRUCTION-SUMMARY.md`
- ğŸ“– æ•°æ®æ ¼å¼: `README-KSPACE.md`
- ğŸ“– FFTæ–‡æ¡£: `README-FFT2D.md`

## æŠ€æœ¯æ ˆ

- **è¯­è¨€**: C99
- **ç¼–è¯‘å™¨**: GCC
- **ä¼˜åŒ–**: -O2
- **åº“**: libm (æ•°å­¦åº“)
- **ç²¾åº¦**: Double (64-bit)

---

**å¿«é€Ÿå¸®åŠ©**: è¿è¡Œ `./kspace_to_image` æŸ¥çœ‹ç”¨æ³•  
**å®Œæ•´æµ‹è¯•**: è¿è¡Œ `./test_kspace_reconstruction.sh`
